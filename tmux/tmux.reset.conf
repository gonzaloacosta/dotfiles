# =====================================================================
# üß≠ SESSION & WINDOW MANAGEMENT
# =====================================================================

# Lock the current tmux server (Ctrl+x)
bind ^X lock-server

# Create a new window in the home directory
bind c new-window -c "$HOME"

# Detach from the current tmux session (Ctrl+d)
bind ^D detach

# List all connected clients
bind * list-clients

# Switch to previous / next window (H/L)
bind H previous-window
bind L next-window

# Rename the current window (prefix + r)
bind r command-prompt "rename-window %%"

# Reload tmux configuration (prefix + R)
bind R source-file ~/.config/tmux/tmux.conf \; display "Reloaded!"

# Switch to last active window (Ctrl+a)
bind ^A last-window

# List all windows (Ctrl+w or w)
bind ^W list-windows
bind w list-windows

# Choose window interactively (")
bind '"' choose-window

# =====================================================================
# ü™ü PANE MANAGEMENT
# =====================================================================

# Toggle pane zoom (prefix + z)
bind z resize-pane -Z

# Refresh the tmux client display (Ctrl+L or l)
bind ^L refresh-client
bind l refresh-client

# Split panes ‚Äî vertical and horizontal
bind | split-window -v
bind - split-window -h

# Split panes keeping current working directory
bind s split-window -v -c "#{pane_current_path}"
bind v split-window -h -c "#{pane_current_path}"

# Move between panes using hjkl (vi-style navigation)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize panes using keys (fast resize mode)
bind -r -T prefix , resize-pane -L 20
bind -r -T prefix . resize-pane -R 20
bind -r -T prefix - resize-pane -D 7
bind -r -T prefix = resize-pane -U 7

# Kill the current pane (prefix + q)
bind q kill-pane

# Swap current pane downwards
bind x swap-pane -D

# Synchronize input across panes (prefix + *)
bind * setw synchronize-panes

# Toggle pane border status (prefix + P)
bind P set pane-border-status

# =====================================================================
# üñ•Ô∏è SESSION CONTROL & SELECTION
# =====================================================================

# Choose and switch sessions (prefix + S)
bind S choose-session

# Clear the current pane (prefix + K)
bind K send-keys "clear" \; send-keys "Enter"

# =====================================================================
# üìã COPY & PASTE MODE
# =====================================================================

# Enter copy mode (prefix + [)
bind [ copy-mode

# Paste from tmux buffer (prefix + ])
bind ] paste-buffer

# =====================================================================
# üîÑ LAYOUTS & WINDOW ARRANGEMENT
# =====================================================================

# Cycle through layouts (prefix + /)
bind / next-layout

# =====================================================================
# üñ±Ô∏è Mouse & Scroll Configuration
# =====================================================================

# Enable mouse support (scrolling, pane resize, window select)
set -g mouse on

# When in copy mode (scrollback), use the mouse wheel to scroll
bind -T copy-mode-vi WheelUpPane   send-keys -X scroll-up
bind -T copy-mode-vi WheelDownPane send-keys -X scroll-down

# Enter copy mode automatically when you scroll up with the mouse
bind -n WheelUpPane if-shell -F "#{pane_in_mode}" "send-keys -M" "copy-mode -e; send-keys -M"

# Allow normal scrolling once in copy mode
bind -n WheelDownPane if-shell -F "#{pane_in_mode}" "send-keys -M" "send-keys -M"

# =====================================================================
# üîç Optional: Better visual mode in copy-mode-vi
# =====================================================================
setw -g mode-keys vi
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel
